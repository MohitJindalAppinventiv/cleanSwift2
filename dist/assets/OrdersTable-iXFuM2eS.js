import{c as g,u as _,m as ee,r as v,h as te,R as ae,j as e,n as se,J as H,k as le}from"./index-ByY07t5U.js";import{T as re,a as ne,b as N,c as d,d as ie,e as c}from"./table-DrbJVUPK.js";import{D as w,a as k,b as M,c as C,d as S,e as F}from"./dropdown-menu-BdWAUv_f.js";import{B as x}from"./button-DBciqQcI.js";import{O as oe}from"./OrderStatusBadge-Dg7uW5Ai.js";import{P as ce,a as de,b as D,c as he,d as me,e as xe}from"./pagination-C8Rc9njr.js";import{F as P}from"./filter-BcVLYW8s.js";import{E as ue}from"./eye-VMx-kwYO.js";import{L as pe}from"./loader-circle-CHQfb1Hg.js";import{e as ge}from"./select-DSUhFaX8.js";import{C as R}from"./clock-DBwSQnl3.js";import{C as ye}from"./circle-check-BwmQp1B-.js";import{T as be}from"./truck-D4vkvwy8.js";import{C as fe}from"./user-check-B-SYn2ow.js";import{A as je,a as ve,b as Ne}from"./arrow-up-CY5QDakW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=g("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=g("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=g("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=g("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),E=[{value:"pending",label:"Pending",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(R,{className:"w-4 h-4"})},{value:"confirmed",label:"Confirmed",color:"bg-blue-100 text-blue-800",icon:e.jsx(ye,{className:"w-4 h-4"})},{value:"outForPickup",label:"Out for Pickup",color:"bg-orange-100 text-orange-800",icon:e.jsx(Me,{className:"w-4 h-4"})},{value:"processing",label:"Processing",color:"bg-gray-200 text-gray-800",icon:e.jsx(ke,{className:"w-4 h-4 animate-spin-slow"})},{value:"ready",label:"Ready",color:"bg-cyan-100 text-cyan-800",icon:e.jsx(we,{className:"w-4 h-4"})},{value:"outForDelivery",label:"Out for Delivery",color:"bg-indigo-100 text-indigo-800",icon:e.jsx(be,{className:"w-4 h-4"})},{value:"delivered",label:"Delivered",color:"bg-green-100 text-green-800",icon:e.jsx(q,{className:"w-4 h-4"})},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800",icon:e.jsx(fe,{className:"w-4 h-4"})}],Ce=[{value:"cod",label:"Cash on Delivery"},{value:"online",label:"Online"}],Se=[{value:"pending",label:"Pending"},{value:"paid",label:"Paid"},{value:"refunded",label:"Refunded"}];function Fe({orders:m,pagination:o,onPageChange:p,onStatusUpdated:B,pageSize:A=10}){const U=_(),I=ee(),[y,T]=v.useState(null),O=te(),b=I.pathname==="/",f=["pending","confirmed","outForPickup","processing","ready","outForDelivery","delivered"],J=t=>{if(t==="pending")return[];if(t==="delivered")return[];const s=f.indexOf(t);if(s===-1)return[];const r=[];return s<f.length-1&&r.push(f[s+1]),["pending","confirmed","outForPickup"].includes(t)&&r.push("cancelled"),r},[h,Z]=v.useState({field:null,direction:"asc"}),[l,z]=v.useState({paymentMethod:[],paymentStatus:[]}),L=t=>{Z(s=>({field:t,direction:s.field===t&&s.direction==="asc"?"desc":"asc"}))},$=(t,s)=>{z(r=>{const a=r[t],n=a.includes(s)?a.filter(i=>i!==s):[...a,s];return{...r,[t]:n}})},W=()=>{z({paymentMethod:[],paymentStatus:[]})},u=ae.useMemo(()=>{let t=[...m||[]];return l.paymentMethod.length>0&&(t=t.filter(s=>l.paymentMethod.includes(s.paymentMethod||""))),l.paymentStatus.length>0&&(t=t.filter(s=>l.paymentStatus.includes(s.paymentStatus||""))),h.field&&t.sort((s,r)=>{let a=0,n=0;return h.field==="createdAt"?(a=new Date(s.createdAt).getTime(),n=new Date(r.createdAt).getTime()):h.field==="finalTotal"&&(a=s.finalTotal||0,n=r.finalTotal||0),a<n?h.direction==="asc"?-1:1:a>n?h.direction==="asc"?1:-1:0}),t},[m,h,l]),V=t=>h.field!==t?e.jsx(je,{className:"h-4 w-4 opacity-50"}):h.direction==="asc"?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(Ne,{className:"h-4 w-4"}),X=t=>{U(`/order-details/${t}`)},G=async(t,s)=>{var r;try{T(t),await O(se({orderId:t,status:s})).unwrap(),H.success(`Order status updated to ${(r=E.find(a=>a.value===s))==null?void 0:r.label}`),await O(le({page:o==null?void 0:o.page,limit:o==null?void 0:o.limit}))}catch{H.error("Failed to update status")}finally{T(null)}},K=t=>({pending:"hover:bg-gray-50 text-gray-700 hover:text-gray-800",confirmed:"hover:bg-cyan-50 text-cyan-700 hover:text-cyan-800",outForPickup:"hover:bg-purple-50 text-purple-700 hover:text-purple-800",processing:"hover:bg-yellow-50 text-yellow-700 hover:text-yellow-800",ready:"hover:bg-blue-50 text-blue-700 hover:text-blue-800",outForDelivery:"hover:bg-orange-50 text-orange-700 hover:text-orange-800",delivered:"hover:bg-indigo-50 text-indigo-700 hover:text-indigo-800",cancelled:"hover:bg-red-50 text-red-700 hover:text-red-800"})[t]||"hover:bg-gray-50 text-gray-700",j=l.paymentMethod.length>0||l.paymentStatus.length>0,Q=()=>{if(!o)return null;const{page:t,limit:s,total:r,totalPages:a}=o;if(a<=1)return null;const n=[];if(a<=7)for(let i=1;i<=a;i++)n.push(i);else n.push(1),t<=3?n.push(2,3,4,"ellipsis"):t>=a-2?n.push("ellipsis",a-3,a-2,a-1):n.push("ellipsis",t-1,t,t+1,"ellipsis"),n.push(a);return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 px-4 py-2 rounded-md border bg-white shadow-sm",children:["Showing"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t-1)*s+1})," ","to"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Math.min(t*s,r)})," ","of ",e.jsx("span",{className:"font-semibold text-gray-800",children:r})," ","results (",s," per page)"]}),e.jsx(ce,{className:"mx-0 w-auto",children:e.jsxs(de,{className:"gap-1",children:[e.jsx(D,{children:e.jsx(he,{onClick:()=>p(Math.max(1,t-1)),className:`${t===1?"pointer-events-none opacity-50 bg-gray-100":"cursor-pointer bg-white hover:bg-[#9B87F5] hover:text-white transition-colors"} border rounded-md px-3 py-2`})}),n.map((i,Y)=>e.jsx(D,{children:i==="ellipsis"?e.jsx("div",{className:"flex h-9 w-9 items-center justify-center text-gray-400 font-medium",children:"..."}):e.jsx(me,{isActive:t===i,onClick:()=>p(i),className:`h-9 w-9 flex items-center justify-center border rounded-md text-sm transition-colors
                    ${t===i?"bg-[#9B87F5] text-white border-[#9B87F5]":"bg-white text-gray-700 border-gray-300 hover:bg-[#9B87F5] hover:text-white"}`,children:i})},Y)),e.jsx(D,{children:e.jsx(xe,{onClick:()=>p(Math.min(a,t+1)),className:`${t===a?"pointer-events-none opacity-50 bg-gray-100":"cursor-pointer bg-white hover:bg-[#9B87F5] hover:text-white transition-colors"} border rounded-md px-3 py-2`})})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[j&&e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[u.length," of ",(m==null?void 0:m.length)||0," orders shown"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.paymentMethod.length>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Payment Method: ",l.paymentMethod.length]}),l.paymentStatus.length>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Payment Status: ",l.paymentStatus.length]})]})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:W,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:"Clear Filters"})]}),e.jsx("div",{className:"rounded-lg border shadow-sm bg-white overflow-hidden transition-all",children:e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(N,{className:"bg-gray-50",children:[e.jsx(d,{className:"font-semibold text-gray-800",children:"Order ID"}),e.jsx(d,{className:"font-semibold text-gray-800",children:"Customer"}),e.jsx(d,{className:"font-semibold text-gray-800",children:"Address"}),e.jsx(d,{className:"font-semibold text-gray-800",children:e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>L("createdAt"),className:"h-auto p-0 font-semibold text-gray-800 hover:bg-transparent hover:text-[#9B87F5] flex items-center gap-2",children:["Order Date",V("createdAt")]})}),e.jsx(d,{className:"font-semibold text-gray-800",children:e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>L("finalTotal"),className:"h-auto p-0 font-semibold text-gray-800 hover:bg-transparent hover:text-[#9B87F5] flex items-center gap-2",children:["Total",V("finalTotal")]})}),e.jsx(d,{className:"font-semibold text-gray-800",children:e.jsxs(w,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"ghost",size:"sm",className:`h-auto p-0 font-semibold hover:bg-transparent hover:text-[#9B87F5] flex items-center gap-2 ${l.paymentMethod.length>0?"text-[#9B87F5]":"text-gray-800"}`,children:["Payment Method",e.jsx(P,{className:`h-3 w-3 ${l.paymentMethod.length>0?"text-[#9B87F5]":"text-gray-500"}`}),l.paymentMethod.length>0&&e.jsx("span",{className:"bg-[#9B87F5] text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.paymentMethod.length})]})}),e.jsxs(M,{align:"start",className:"w-48",children:[e.jsx(C,{children:"Filter by Payment Method"}),e.jsx(S,{}),Ce.map(t=>e.jsx(F,{onClick:()=>$("paymentMethod",t.value),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.paymentMethod.includes(t.value),onChange:()=>{},className:"rounded border-gray-300"}),e.jsx("span",{children:t.label})]})},t.value))]})]})}),e.jsx(d,{className:"font-semibold text-gray-800",children:e.jsxs(w,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"ghost",size:"sm",className:`h-auto p-0 font-semibold hover:bg-transparent hover:text-[#9B87F5] flex items-center gap-2 ${l.paymentStatus.length>0?"text-[#9B87F5]":"text-gray-800"}`,children:["Payment Status",e.jsx(P,{className:`h-3 w-3 ${l.paymentStatus.length>0?"text-[#9B87F5]":"text-gray-500"}`}),l.paymentStatus.length>0&&e.jsx("span",{className:"bg-[#9B87F5] text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.paymentStatus.length})]})}),e.jsxs(M,{align:"start",className:"w-48",children:[e.jsx(C,{children:"Filter by Payment Status"}),e.jsx(S,{}),Se.map(t=>e.jsx(F,{onClick:()=>$("paymentStatus",t.value),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.paymentStatus.includes(t.value),onChange:()=>{},className:"rounded border-gray-300"}),e.jsx("span",{children:t.label})]})},t.value))]})]})}),e.jsx(d,{className:"font-semibold text-gray-800",children:"Order Status"}),!b&&e.jsx(d,{className:"text-right font-semibold text-gray-800",children:"Actions"})]})}),e.jsx(ie,{children:(u==null?void 0:u.length)>0?u.map((t,s)=>{var r;return e.jsxs(N,{className:`hover:bg-gray-50 transition-colors ${s%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx(c,{className:"font-medium text-gray-900",children:t.orderId}),e.jsx(c,{className:"text-gray-700",children:t.customerName}),e.jsx(c,{children:e.jsx("div",{className:"max-w-[200px] truncate text-gray-600",children:t.addressLabel||"N/A"})}),e.jsx(c,{className:"text-gray-600",children:new Date(t.createdAt).toLocaleDateString()}),e.jsxs(c,{className:"font-semibold text-gray-900",children:["$",((r=t.finalTotal)==null?void 0:r.toFixed(2))||"0.00"]}),e.jsx(c,{children:e.jsx("span",{className:"capitalize text-gray-600",children:t.paymentMethod==="cod"?"Cash on Delivery":t.paymentMethod==="online"?"Online":"N/A"})}),e.jsx(c,{children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors
                        ${t.paymentStatus==="paid"?"bg-green-100 text-green-800":t.paymentStatus==="refunded"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.paymentStatus||"pending"})}),e.jsx(c,{children:e.jsx(oe,{status:t.status})}),!b&&e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(t.id),className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(w,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",disabled:y===t.id,className:"bg-gradient-to-r from-[#9B87F5] to-[#9B87F5] text-white hover:from-[#7C3AED] hover:to-[#9333EA] border-0 shadow-md transition-all duration-200 rounded-lg",children:[y===t.id?e.jsx(pe,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Update Status"]})}),e.jsxs(M,{align:"end",className:"w-52 bg-white/95 backdrop-blur-sm border-0 shadow-xl rounded-xl ring-1 ring-gray-200/50",children:[e.jsx(C,{className:"text-slate-700 font-semibold bg-gradient-to-r from-gray-50 to-slate-50 rounded-t-xl py-3 px-4 text-sm",children:"Change Status"}),e.jsx(S,{className:"border-gray-200/60"}),e.jsx("div",{className:"p-1",children:t.status==="pending"?e.jsxs("div",{className:"p-3 text-center text-gray-500 text-sm",children:[e.jsx(R,{className:"w-5 h-5 mx-auto mb-2 text-yellow-500"}),"Order is pending. Cannot update status at this time."]}):t.status==="delivered"?e.jsxs("div",{className:"p-3 text-center text-gray-500 text-sm",children:[e.jsx(q,{className:"w-5 h-5 mx-auto mb-2 text-green-500"}),"Order has been delivered. No further status updates available."]}):E.filter(a=>J(t.status).includes(a.value)).map(a=>e.jsxs(F,{onClick:()=>G(t.id,a.value),disabled:y===t.id,className:`cursor-pointer transition-all duration-200 rounded-lg mx-1 mb-1 p-3 flex items-center gap-2 ${K(a.value)}`,children:[e.jsx("span",{className:`flex items-center justify-center w-6 h-6 rounded-full ${a.color}`,children:a.icon}),e.jsx("span",{className:"font-medium text-sm",children:a.label})]},a.value))})]})]})]})})]},t.id)}):e.jsx(N,{children:e.jsx(c,{colSpan:b?8:9,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v1a2 2 0 001 1.732l1 .607a.75.75 0 00.75 0l1-.607A2 2 0 0010 8V7a2 2 0 00-2-2zM5.25 6H.75a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5zM0 10.25a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75zM0 13.75a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75z"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 font-medium",children:j?"No orders match your filters":"No orders found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j?"Try adjusting your filter criteria":"Try adjusting your search or filter criteria"})]})]})})})})]})}),Q()]})}function Ie({orders:m,pagination:o,isLoading:p,onPageChange:B,pageSize:A=10}){return e.jsx(Fe,{orders:m,pagination:o,onPageChange:B,pageSize:A})}export{Ie as O};
