import{q as C,u as g,r as b,j as e,b as y,A as N}from"./index-ByY07t5U.js";import{D as F}from"./DashboardLayout-CorAQK4x.js";import{C as D,a as S,b as w,c as A}from"./card-DrHBsbjm.js";import{o as M,s as m,c as x,b as O,u as P,t as T}from"./index-pvnq_pFp.js";import{F as V,a as o,b as i,c as t,d as r,f as c,e as l}from"./form-D1pnXXWo.js";import{I as a}from"./input-DcxO3ESS.js";import{B as j}from"./button-DBciqQcI.js";import{S as E}from"./switch-C1bv9KX7.js";import{L as I}from"./loader-circle-CHQfb1Hg.js";import{A as U}from"./arrow-left-DJgxny9G.js";import"./label-CtRxIZG0.js";import"./index-DDlNMbpf.js";const k=M({code:m().min(3).max(20),couponName:m().min(3).max(50),maxDiscount:x.number().min(1),validFrom:m().nonempty(),validUntil:m().nonempty(),minOrderValue:x.number().min(100),isActive:O().default(!0),discountPercentage:x.number().min(1).max(100)});function L(){const{toast:d}=C(),p=g(),[u,h]=b.useState(!1),s=P({resolver:T(k),defaultValues:{code:"",couponName:"",maxDiscount:100,validFrom:new Date().toISOString().split("T")[0],validUntil:new Date(new Date().setMonth(new Date().getMonth()+3)).toISOString().split("T")[0],minOrderValue:0,isActive:!0,discountPercentage:10}}),v=async n=>{try{h(!0);const f=await y.post(N.CREATE_COUPON(),{couponCode:n.code,couponName:n.couponName,maxDiscount:n.maxDiscount,minValue:n.minOrderValue,validFrom:n.validFrom,validTill:n.validUntil,isActive:n.isActive,discountPercentage:n.discountPercentage});d({title:"Coupon created successfully",description:`Coupon ${n.code} has been created.`}),p("/config/coupons")}catch(f){console.error(f),d({title:"Error",description:"Failed to create coupon.",variant:"destructive"})}finally{h(!1)}};return e.jsx(V,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(v),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:s.control,name:"code",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Coupon Code"}),e.jsx(r,{children:e.jsx(a,{placeholder:"SUMMER20",...n})}),e.jsx(c,{children:"Enter a unique code for this coupon"}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"couponName",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Coupon Name"}),e.jsx(r,{children:e.jsx(a,{placeholder:"Summer Sale 20% Off",...n})}),e.jsx(c,{children:"Internal name for the coupon"}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"maxDiscount",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Maximum Discount"}),e.jsx(r,{children:e.jsx(a,{type:"number",...n})}),e.jsx(c,{children:"Maximum Discount to apply"}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"validFrom",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Valid From"}),e.jsx(r,{children:e.jsx(a,{type:"date",...n})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"validUntil",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Valid Until"}),e.jsx(r,{children:e.jsx(a,{type:"date",...n})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"minOrderValue",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Minimum Order Value"}),e.jsx(r,{children:e.jsx(a,{type:"number",...n})}),e.jsx(c,{children:"Minimum order value required to use this coupon"}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"isActive",render:({field:n})=>e.jsxs(i,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{className:"text-base",children:"Active Status"}),e.jsx(c,{children:"Enable or disable this coupon"})]}),e.jsx(r,{children:e.jsx(E,{checked:n.value,onCheckedChange:n.onChange})})]})}),e.jsx(o,{control:s.control,name:"discountPercentage",render:({field:n})=>e.jsxs(i,{children:[e.jsx(t,{children:"Discount Percentage"}),e.jsx(r,{children:e.jsx(a,{type:"number",...n})}),e.jsx(c,{children:"Discount Percentage"}),e.jsx(r,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>p("/config/coupons"),disabled:u,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Coupon"})]})]})})}function q(){const d=g();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>d("/config/coupons"),className:"mr-4",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Back to Coupons"]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Create New Coupon"})]}),e.jsxs(D,{children:[e.jsx(S,{children:e.jsx(w,{children:"Coupon Details"})}),e.jsx(A,{children:e.jsx(L,{})})]})]})}function Y(){return e.jsx(F,{children:e.jsx(q,{})})}export{Y as default};
