import{j as e,r as h,u as x,q as p,J as u}from"./index-ByY07t5U.js";import{D as b}from"./DashboardLayout-CorAQK4x.js";import{o as y,s as j,b as v,u as f,t as F}from"./index-pvnq_pFp.js";import{B as C}from"./button-DBciqQcI.js";import{F as S,a as c,b as d,c as l,d as m,f as g,e as M}from"./form-D1pnXXWo.js";import{I as E}from"./input-DcxO3ESS.js";import{S as N}from"./switch-C1bv9KX7.js";import"./label-CtRxIZG0.js";import"./index-DDlNMbpf.js";const w=y({serverKey:j().min(1,"Server Key is required"),isEnabled:v().default(!0)}),K=({defaultValues:s,onSave:a,isLoading:n=!1})=>{const o=f({resolver:F(w),defaultValues:{serverKey:(s==null?void 0:s.serverKey)||"",isEnabled:(s==null?void 0:s.isEnabled)!==void 0?s.isEnabled:!0}}),t=r=>{a({serverKey:r.serverKey,isEnabled:r.isEnabled,lastUpdated:new Date().toISOString()})};return e.jsx(S,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(t),className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{control:o.control,name:"serverKey",render:({field:r})=>e.jsxs(d,{children:[e.jsx(l,{children:"FCM Server Key"}),e.jsx(m,{children:e.jsx(E,{placeholder:"Enter your FCM Server Key",...r,type:"password"})}),e.jsx(g,{children:"The server key is used to authenticate requests to the Firebase Cloud Messaging API."}),e.jsx(M,{})]})}),e.jsx(c,{control:o.control,name:"isEnabled",render:({field:r})=>e.jsxs(d,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-base",children:"Enable FCM"}),e.jsx(g,{children:"Toggle to enable or disable Firebase Cloud Messaging notifications."})]}),e.jsx(m,{children:e.jsx(N,{checked:r.value,onCheckedChange:r.onChange})})]})})]}),e.jsx(C,{type:"submit",disabled:n,children:n?"Saving...":"Save and Update"})]})})},T=()=>{const[s,a]=h.useState(!1);x();const{toast:n}=p(),o={serverKey:"",isEnabled:!0},t=async r=>{a(!0);try{console.log("Saving FCM config:",r),await new Promise(i=>setTimeout(i,1e3)),u("Configuration Saved",{description:"FCM configuration has been successfully updated."})}catch(i){console.error("Failed to save FCM config:",i),n({variant:"destructive",title:"Failed to Save",description:"There was an error saving your FCM configuration."})}finally{a(!1)}};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"FCM Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure your Firebase Cloud Messaging settings to enable push notifications."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx(K,{defaultValues:o,onSave:t,isLoading:s})})]})},A=()=>e.jsx(b,{children:e.jsx(T,{})});export{A as default};
