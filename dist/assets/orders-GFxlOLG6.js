import{h as V,i as Q,r as t,l as j,k as v,j as e}from"./index-ByY07t5U.js";import{D as w,P as C,U as X}from"./DashboardLayout-CorAQK4x.js";import{O as q}from"./OrdersTable-iXFuM2eS.js";import{B as G}from"./button-DBciqQcI.js";import{S,a as D,b as P,c as M,d as r}from"./select-DSUhFaX8.js";import{I as H}from"./input-DcxO3ESS.js";import{B as y}from"./badge-B45milNp.js";import{C as m,c as x}from"./card-DrHBsbjm.js";import{C as J}from"./date-range-picker-CI4bxXt7.js";import{C as K}from"./clock-DBwSQnl3.js";import{C as W}from"./circle-check-big-BqL8GB_a.js";import{C as Y}from"./user-check-B-SYn2ow.js";import{S as Z}from"./search-d2cfHkwq.js";import"./table-DrbJVUPK.js";import"./dropdown-menu-BdWAUv_f.js";import"./index-DjrpyVfh.js";import"./Combination-DHf6tu9R.js";import"./index-n1Mj4gwV.js";import"./index-Dxwkp90n.js";import"./chevron-right-Nhb4I_UE.js";import"./OrderStatusBadge-Dg7uW5Ai.js";import"./truck-D4vkvwy8.js";import"./pagination-C8Rc9njr.js";import"./chevron-left-BFqG9IJl.js";import"./filter-BcVLYW8s.js";import"./eye-VMx-kwYO.js";import"./loader-circle-CHQfb1Hg.js";import"./circle-check-BwmQp1B-.js";import"./arrow-up-CY5QDakW.js";import"./index-DDlNMbpf.js";import"./popover-C7cgABi1.js";import"./calendar-DaBMcz2l.js";const Oe=()=>{const g=V(),{orders:i=[],pagination:c,analytics:n,isLoading:k,error:f}=Q(s=>s.orders),[p,O]=t.useState(""),[l,F]=t.useState("all"),[d,A]=t.useState("all"),[N,o]=t.useState(1),[a,T]=t.useState({}),[b,U]=t.useState(10),h=t.useMemo(()=>n?{totalOrders:n.totalOrders||0,processing:n.totalProcessingOrder||0,delivered:n.totalDeliveredOrder||0,cancelled:n.totalCancelledOrder||0,totalUsers:n.totalUsers||0}:Array.isArray(i)?{totalOrders:(c==null?void 0:c.total)||i.length,processing:i.filter(s=>(s==null?void 0:s.status)==="processing").length,delivered:i.filter(s=>(s==null?void 0:s.status)==="delivered").length,cancelled:i.filter(s=>(s==null?void 0:s.status)==="cancelled").length,totalUsers:0}:{totalOrders:0,processing:0,delivered:0,cancelled:0,totalUsers:0},[i,c==null?void 0:c.total,n]),u=t.useMemo(()=>{const s={page:N,limit:b,includeAnalytics:!0};return l!=="all"&&(s.status=l),d!=="all"&&(s.paymentMethod=d),p.trim()!==""&&(s.search=p.trim()),a.startDate&&(s.startDate=j(a.startDate,"yyyy-MM-dd")),a.endDate&&(s.endDate=j(a.endDate,"yyyy-MM-dd")),s},[N,b,l,d,p,a]);t.useEffect(()=>{const s=setTimeout(()=>{g(v(u))},300);return()=>clearTimeout(s)},[g,u]);const L=t.useCallback(s=>{O(s.target.value),o(1)},[]),R=t.useCallback(s=>{F(s),o(1)},[]);t.useCallback(s=>{A(s),o(1)},[]);const B=t.useCallback(s=>{o(s)},[]),I=t.useCallback(s=>{U(s),o(1)},[]),z=t.useCallback(s=>{T(s),o(1)},[]),E=t.useCallback(()=>{g(v(u))},[g,u]);return t.useMemo(()=>e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Active Filters:"}),l!=="all"&&e.jsxs(y,{variant:"outline",className:"text-xs bg-white border-gray-300 text-gray-700",children:["Status: ",l]}),d!=="all"&&e.jsxs(y,{variant:"outline",className:"text-xs bg-white border-gray-300 text-gray-700",children:["Payment: ",d]}),a.startDate&&e.jsxs(y,{variant:"outline",className:"text-xs bg-white border-gray-300 text-gray-700",children:["From: ",j(a.startDate,"MMM dd, yyyy")]}),a.endDate&&e.jsxs(y,{variant:"outline",className:"text-xs bg-white border-gray-300 text-gray-700",children:["To: ",j(a.endDate,"MMM dd, yyyy")]})]}),[l,d,a]),l!=="all"||d!=="all"||a.startDate||a.endDate,f?e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4 text-lg",children:f}),e.jsx(G,{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Try Again"})]})})}):e.jsx(w,{children:e.jsxs("div",{className:"space-y-8 bg-white min-h-screen",children:[e.jsxs("div",{className:"bg-gray-50 -mx-6 px-6 py-8 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(C,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900",children:"Orders Management"}),e.jsx("p",{className:"text-gray-600 text-lg mt-1",children:"Monitor and manage all customer orders in real-time"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(J,{value:a,onChange:z})})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-8",children:[e.jsx(m,{className:"bg-white border-gray-200 shadow-sm",children:e.jsxs(x,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-md",children:e.jsx(C,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.totalOrders.toLocaleString()})]})]})}),e.jsx(m,{className:"bg-white border-gray-200 shadow-sm",children:e.jsxs(x,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-50 rounded-md",children:e.jsx(K,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.processing.toLocaleString()})]})]})}),e.jsx(m,{className:"bg-white border-gray-200 shadow-sm",children:e.jsxs(x,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-md",children:e.jsx(W,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.delivered.toLocaleString()})]})]})}),e.jsx(m,{className:"bg-white border-gray-200 shadow-sm",children:e.jsxs(x,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-50 rounded-md",children:e.jsx(Y,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.cancelled.toLocaleString()})]})]})}),e.jsx(m,{className:"bg-white border-gray-200 shadow-sm",children:e.jsxs(x,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-md",children:e.jsx(X,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.totalUsers.toLocaleString()})]})]})})]})]}),e.jsx(m,{className:"border-gray-200 shadow-sm bg-white",children:e.jsx(x,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center flex-1",children:[e.jsxs("div",{className:"flex-1 max-w-md relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{type:"search",placeholder:"Search by customer name, order ID, or phone...",className:"pl-10 h-11 border-gray-300 focus:border-blue-500 bg-white text-gray-900 placeholder:text-gray-500",value:p,onChange:L})]}),e.jsxs(S,{value:l,onValueChange:R,children:[e.jsx(D,{className:"w-[180px] h-11 bg-white border-gray-300 text-gray-900",children:e.jsx(P,{placeholder:"Status"})}),e.jsxs(M,{className:"bg-white border-gray-200",children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"outForPickup",children:"Out for Pickup"}),e.jsx(r,{value:"cancelled",children:"Cancelled"}),e.jsx(r,{value:"processing",children:"Processing"}),e.jsx(r,{value:"ready",children:"Ready"}),e.jsx(r,{value:"outForDelivery",children:"Out For Delivery"}),e.jsx(r,{value:"delivered",children:"Delivered"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Show:"}),e.jsxs(S,{value:b.toString(),onValueChange:s=>I(Number(s)),children:[e.jsx(D,{className:"w-[80px] h-11 bg-white border-gray-300 text-gray-900",children:e.jsx(P,{})}),e.jsxs(M,{className:"bg-white border-gray-200",children:[e.jsx(r,{value:"5",children:"5"}),e.jsx(r,{value:"10",children:"10"}),e.jsx(r,{value:"15",children:"15"}),e.jsx(r,{value:"25",children:"25"}),e.jsx(r,{value:"50",children:"50"})]})]})]})]})})})}),e.jsx(q,{orders:i,pagination:c,isLoading:k,onPageChange:B})]})})};export{Oe as default};
