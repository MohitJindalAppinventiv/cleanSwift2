import{u as y,r as h,b as C,A as v,J as b,j as o}from"./index-ByY07t5U.js";import{D as I}from"./DashboardLayout-CorAQK4x.js";import{S as E}from"./ServiceForm-2OWDgV1-.js";import"./button-DBciqQcI.js";import"./index-pvnq_pFp.js";import"./input-DcxO3ESS.js";import"./textarea-CMzAX9ph.js";import"./form-D1pnXXWo.js";import"./label-CtRxIZG0.js";import"./select-DSUhFaX8.js";import"./index-DjrpyVfh.js";import"./Combination-DHf6tu9R.js";import"./index-Dxwkp90n.js";import"./index-DDlNMbpf.js";import"./switch-C1bv9KX7.js";import"./upload-Dz_LuVq4.js";const T=()=>{const l=y(),[g,c]=h.useState(!1),[n,s]=h.useState({name:"",description:"",pricingmodel:"per_kg",status:"active",imageBase64:"",thumbnail:""}),[u,p]=h.useState([]),[f,d]=h.useState(Date.now());return{service:n,selectedVariants:u,fileInputKey:f,isLoading:g,handleInputChange:e=>{const{name:a,value:t}=e.target;s(i=>({...i,[a]:t}))},handleStatusChange:e=>{s(a=>({...a,status:e}))},handleVariantToggle:e=>{p(a=>a.includes(e)?a.filter(t=>t!==e):[...a,e])},handleFileChange:async e=>{if(!e.target.files||e.target.files.length===0)return;const a=e.target.files[0],t=new FileReader;t.onloadend=()=>{const i=t.result;s(m=>({...m,imageBase64:i,thumbnail:i}))},t.readAsDataURL(a)},handleRemoveThumbnail:()=>{s(e=>({...e,imageBase64:"",thumbnail:""})),d(Date.now())},handlePricingModelChange:e=>{s(a=>({...a,pricingmodel:e}))},handleSubmit:async e=>{var a,t,i,m;e.preventDefault(),c(!0);try{const r={name:n.name,description:n.description,pricingModel:n.pricingmodel,imageBase64:n.imageBase64},x=await C.post(`${v.CREATE_SERVICE()}`,r,{headers:{"Content-Type":"application/json"}});n.status&&n.status!=="active"&&await C.patch(`${v.TOGGLE_SERVICE_STATUS()}?serviceId=${x.data.id}`),b.success("Service created successfully"),l("/config/services")}catch(r){console.error("Error creating service:",((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||r.message),b.error(((m=(i=r.response)==null?void 0:i.data)==null?void 0:m.message)||"Failed to create service")}finally{c(!1)}},handleCancel:()=>{l("/config/services")},setFileInputKey:d}},Q=()=>{const{service:l,fileInputKey:g,handleInputChange:c,handleStatusChange:n,isLoading:s,handleFileChange:u,handlePricingModelChange:p,handleSubmit:f,handleCancel:d,handleRemoveThumbnail:S}=T();return o.jsx(I,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsx("h1",{className:"text-2xl font-bold",children:"Add New Service"})}),o.jsx(E,{service:l,isLoading:s,fileInputKey:g,handleInputChange:c,handleStatusChange:n,handlePricingModelChange:p,handleFileChange:u,handleRemoveThumbnail:S,handleSubmit:f,handleCancel:d})]})})};export{Q as default};
