import{j as e,a as y,l as j,u as O,r as F,t as C}from"./index-ByY07t5U.js";import{D as P}from"./DashboardLayout-CorAQK4x.js";import{z as a,u as q,t as T}from"./index-pvnq_pFp.js";import{B as f}from"./button-DBciqQcI.js";import{P as k,a as E,b as M,C as _}from"./popover-C7cgABi1.js";import{F as I,a as n,b as l,c as i,d,e as c}from"./form-D1pnXXWo.js";import{S,a as b,b as N,c as w,d as o}from"./select-DSUhFaX8.js";import{I as h}from"./input-DcxO3ESS.js";import{C as V,c as A}from"./card-DrHBsbjm.js";import{C as B}from"./calendar-DaBMcz2l.js";import"./chevron-left-BFqG9IJl.js";import"./chevron-right-Nhb4I_UE.js";import"./Combination-DHf6tu9R.js";import"./index-Dxwkp90n.js";import"./label-CtRxIZG0.js";import"./index-DjrpyVfh.js";import"./index-DDlNMbpf.js";const H=a.object({customer:a.string().min(1,"Customer name is required"),service:a.enum(["wash_fold","dry_clean","express"],{required_error:"Service type is required"}),status:a.enum(["new","processing","pickup","delivered","completed"],{required_error:"Status is required"}),orderDate:a.date({required_error:"Order date is required"}),address:a.string().min(1,"Address is required"),total:a.string().min(1,"Total amount is required").refine(m=>!isNaN(Number(m))&&Number(m)>0,"Total amount must be a positive number"),items:a.string().min(1,"Order items are required")}),L=({onSubmit:m,isSubmitting:u,defaultValues:x={customer:"",service:"wash_fold",status:"new",address:"",total:"",items:"",orderDate:new Date}})=>{const s=q({resolver:T(H),defaultValues:x}),p=r=>{const{orderDate:v,...t}=r,g={customer:t.customer,service:t.service,status:t.status,address:t.address,total:parseFloat(t.total),items:t.items};m(g)};return e.jsx(V,{children:e.jsx(A,{className:"pt-6",children:e.jsx(I,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(p),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:s.control,name:"customer",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Customer Name"}),e.jsx(d,{children:e.jsx(h,{placeholder:"Enter customer name",...r})}),e.jsx(c,{})]})}),e.jsx(n,{control:s.control,name:"service",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Service Type"}),e.jsxs(S,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(d,{children:e.jsx(b,{children:e.jsx(N,{placeholder:"Select service type"})})}),e.jsxs(w,{children:[e.jsx(o,{value:"wash_fold",children:"Wash & Fold"}),e.jsx(o,{value:"dry_clean",children:"Dry Clean"}),e.jsx(o,{value:"express",children:"Express"})]})]}),e.jsx(c,{})]})}),e.jsx(n,{control:s.control,name:"status",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Order Status"}),e.jsxs(S,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(d,{children:e.jsx(b,{children:e.jsx(N,{placeholder:"Select order status"})})}),e.jsxs(w,{children:[e.jsx(o,{value:"new",children:"New Order"}),e.jsx(o,{value:"processing",children:"Processing"}),e.jsx(o,{value:"pickup",children:"Out for Pickup"}),e.jsx(o,{value:"delivered",children:"Delivered"}),e.jsx(o,{value:"completed",children:"Completed"})]})]}),e.jsx(c,{})]})}),e.jsx(n,{control:s.control,name:"orderDate",render:({field:r})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsx(i,{children:"Order Date"}),e.jsxs(k,{children:[e.jsx(E,{asChild:!0,children:e.jsx(d,{children:e.jsxs(f,{variant:"outline",className:y("w-full pl-3 text-left font-normal",!r.value&&"text-muted-foreground"),children:[r.value?j(r.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(B,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(M,{className:"w-auto p-0",align:"start",children:e.jsx(_,{mode:"single",selected:r.value,onSelect:r.onChange,initialFocus:!0,className:y("p-3 pointer-events-auto")})})]}),e.jsx(c,{})]})}),e.jsx(n,{control:s.control,name:"total",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Total Amount"}),e.jsx(d,{children:e.jsx(h,{placeholder:"Enter amount",...r,type:"number",step:"0.01",min:"0"})}),e.jsx(c,{})]})}),e.jsx(n,{control:s.control,name:"address",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Delivery Address"}),e.jsx(d,{children:e.jsx(h,{placeholder:"Enter delivery address",...r})}),e.jsx(c,{})]})})]}),e.jsx(n,{control:s.control,name:"items",render:({field:r})=>e.jsxs(l,{children:[e.jsx(i,{children:"Order Items"}),e.jsx(d,{children:e.jsx(h,{placeholder:"Enter order items",...r})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(f,{type:"submit",disabled:u,children:u?"Saving...":"Create Order"})]})]})})})})},R=()=>{const m=O(),[u,x]=F.useState(!1),s=async p=>{x(!0);try{const r=new Date,v=j(r,"yyyy-MM-dd"),t=j(r,"HH:mm:ss"),g={...p,id:`ORD-${Math.floor(Math.random()*1e3)}`,date:v,time:t,pickupDate:v,pickupTime:t,deliveryDate:j(new Date(r.getTime()+864e5),"yyyy-MM-dd"),deliveryTime:t,discount:0,deliveryCharge:3.5,totalQuantity:1,paymentStatus:"pending"};console.log("Creating order:",g),await new Promise(D=>setTimeout(D,1e3)),C({title:"Success",description:"Order created successfully",variant:"default"}),m("/orders")}catch(r){console.error("Error creating order:",r),C({title:"Error",description:"Failed to create order",variant:"destructive"})}finally{x(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Create New Order"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new order for a customer"})]}),e.jsx(L,{onSubmit:s,isSubmitting:u})]})};function ne(){return e.jsx(P,{children:e.jsx(R,{})})}export{ne as default};
