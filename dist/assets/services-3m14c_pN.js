import{c as z,r as l,b as k,A as Q,j as e,L as $,u as R,X as W,t as b,a as C,p as B}from"./index-ByY07t5U.js";import{P as H,D as V}from"./DashboardLayout-CorAQK4x.js";import{B as m}from"./button-DBciqQcI.js";import{P as G}from"./plus-DsKVMYgt.js";import{C as U,a as K,b as O,c as Z}from"./card-DrHBsbjm.js";import{S as q}from"./switch-C1bv9KX7.js";import{D as X,a as J,b as Y,c as ee,d as se,T as ae}from"./dialog-DND4cV_M.js";import{S as te}from"./square-pen-BFr-I4KV.js";import{I as re}from"./input-DcxO3ESS.js";import{S as ie}from"./search-d2cfHkwq.js";import"./index-DDlNMbpf.js";import"./index-Dxwkp90n.js";import"./Combination-DHf6tu9R.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),ne=[{id:"srv-001",name:"Car Wash",thumbnail:"https://images.unsplash.com/photo-1605810230434-7631ac76ec81",description:"Basic exterior washing service for your vehicle",pricingmodel:"per_kg",status:"active",variants:["Basic","Premium"],additionalService:"Interior vacuuming"},{id:"srv-002",name:"Interior Detailing",thumbnail:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158",description:"Comprehensive cleaning of your vehicle's interior",pricingmodel:"per_kg",status:"active",variants:["Standard","Deep Clean"],additionalService:"Leather conditioning"},{id:"srv-003",name:"Full Vehicle Detail",thumbnail:"https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7",description:"Complete interior and exterior detailing service",pricingmodel:"per_kg",status:"inactive",variants:["Standard","Premium","Luxury"],additionalService:"Paint protection"},{id:"srv-004",name:"Express Wash",thumbnail:"https://images.unsplash.com/photo-1488590528505-98d2b5aba04b",description:"Quick exterior wash service, ready in 15 minutes",pricingmodel:"per_kg",status:"active",variants:["Quick","Standard"],additionalService:"Tire shine"},{id:"srv-005",name:"Wax Treatment",thumbnail:"https://images.unsplash.com/photo-1518770660439-4636190af475",description:"Premium wax application for long-lasting shine and protection",pricingmodel:"per_kg",status:"active",variants:["Spray Wax","Paste Wax","Ceramic Coating"],additionalService:"Paint correction"}],ce=()=>{const[t,r]=l.useState([]),[i,c]=l.useState(""),[n,u]=l.useState(!0),[P,g]=l.useState(null),p=async()=>{try{u(!0),g(null);const o=await k.get(`${Q.GET_ALL_SERVICES()}`);if(o.data.success){const v=o.data.data.map(d=>({id:d.id,name:d.name,thumbnail:d.imageUrl,description:d.description,pricingmodel:d.pricingModel,status:d.isActive?"active":"inactive",variants:d.variants||[],additionalService:d.additionalService||""}));r(v)}else throw new Error(o.data.message||"Failed to fetch services")}catch(o){console.error("Error fetching services:",o),g(o instanceof Error?o.message:"An unknown error occurred"),r(ne)}finally{u(!1)}};l.useEffect(()=>{p()},[]);const x=t.filter(o=>o.name.toLowerCase().includes(i.toLowerCase()));return{services:t,setServices:r,searchQuery:i,setSearchQuery:c,filteredServices:x,isLoading:n,error:P,fetchServices:p}},oe=({searchQuery:t,setSearchQuery:r})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Service Management"}),e.jsx(m,{className:"flex items-center gap-2",asChild:!0,children:e.jsxs($,{to:"/config/services/create",children:[e.jsx(G,{size:16}),"Add New Service"]})})]});function de({services:t,fetchServices:r,isLoading:i}){const c=R(),[n,u]=l.useState(null),[P,g]=l.useState(null),[p,x]=l.useState(null),[o,v]=l.useState(t),[d,y]=l.useState(null),[f,j]=l.useState({open:!1,serviceId:null}),[h,w]=l.useState("all");l.useEffect(()=>{v(t)},[t]);const L=(s,a)=>{s.stopPropagation(),c(`/config/services/edit/${a}`)},I=s=>{try{s.pricingmodel==="per_kg"?c(`/config/products/${s.id}`,{state:{idType:"service"}}):c(`/config/categories/${s.id}`)}catch(a){console.error("Error navigating:",a)}},T=async s=>{try{u(s),await k.delete("/deleteService",{params:{serviceId:s}}),b({title:"Success",description:"Service deleted successfully"}),await r()}catch(a){console.error("Error deleting service:",a),b({title:"Error",description:"Failed to delete service",variant:"destructive"})}finally{u(null),j({open:!1,serviceId:null})}},F=async(s,a,M)=>{s.stopPropagation();const E=M==="active"?"inactive":"active";try{x(a),await k.patch(`/changeStatusOfService?serviceId=${a}`),v(N=>N.map(S=>S.id===a?{...S,status:E}:S)),b({title:"Success",description:`Service marked as ${E}`})}catch(N){console.error("Error updating service status:",N),b({title:"Error",description:"Failed to update service status",variant:"destructive"})}finally{x(null)}},_=(s,a)=>{s.stopPropagation(),y(a)},D=o.filter(s=>h==="all"?!0:h==="per_kg"?s.pricingmodel==="per_kg":h==="per_item"?s.pricingmodel!=="per_kg":!0);return e.jsxs(e.Fragment,{children:[e.jsx(X,{open:f.open,onOpenChange:()=>!n&&j({open:!1,serviceId:null}),children:e.jsxs(J,{children:[e.jsxs(Y,{children:[e.jsx(ee,{children:"Confirm Delete"}),e.jsx("p",{children:"Are you sure you want to delete this service? This action cannot be undone."})]}),e.jsxs(se,{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>j({open:!1,serviceId:null}),disabled:!!n,children:"Cancel"}),e.jsx(m,{variant:"destructive",onClick:()=>{f.serviceId&&T(f.serviceId)},disabled:!!n,children:n===f.serviceId?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>y(null),children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>y(null),className:"absolute -top-12 -right-2 h-8 w-8 bg-white/90 hover:bg-white text-black hover:text-red-500 transition-colors rounded-full shadow-lg z-10",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsx("img",{src:d,alt:"Service preview",className:"max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:s=>s.stopPropagation()})]})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx(m,{variant:h==="all"?"default":"outline",onClick:()=>w("all"),className:"px-6",children:"All Services"}),e.jsx(m,{variant:h==="per_kg"?"default":"outline",onClick:()=>w("per_kg"),className:"px-6",children:"Per KG"}),e.jsx(m,{variant:h==="per_item"?"default":"outline",onClick:()=>w("per_item"),className:"px-6",children:"Per Item"})]}),i?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[...Array(5)].map((s,a)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-gray-200 rounded-t-lg animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-5/6 bg-gray-200 rounded animate-pulse"})]}),e.jsxs("div",{className:"px-4 pb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-6 w-12 bg-gray-200 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"h-9 w-full bg-gray-200 rounded animate-pulse"})})]},a))}):D.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No services found."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:D.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden",onMouseEnter:()=>g(s.id),onMouseLeave:()=>g(null),children:[e.jsxs("div",{className:"relative group",children:[s.thumbnail?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-full h-40 object-cover rounded-t-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:a=>_(a,s.thumbnail)}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-t-lg cursor-pointer",onClick:a=>_(a,s.thumbnail),children:e.jsx("span",{className:"text-white text-sm font-medium px-3 py-1 bg-black/30 rounded-md",children:"Click to view"})})]}):e.jsx("div",{className:"w-full h-40 bg-gray-100 rounded-t-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]}),e.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>I(s),children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 truncate",title:s.name,children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2 min-h-[2.5rem]",title:s.description,children:s.description})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active"}),e.jsx(q,{checked:s.status==="active",onClick:a=>F(a,s.id,s.status),disabled:p===s.id})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:a=>L(a,s.id),"aria-label":"Edit service",type:"button",className:"h-8 w-8 p-0",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),j({open:!0,serviceId:s.id})},disabled:n===s.id||p===s.id,"aria-label":"Delete service",type:"button",className:"h-8 w-8 p-0 text-black hover:text-red-500 transition-colors",children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"w-full",children:e.jsx(m,{variant:"outline",className:`w-full h-9 text-sm font-semibold border-2 transition-colors cursor-pointer ${s.pricingmodel==="per_kg"?"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100":"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100"}`,onClick:()=>I(s),children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.pricingmodel==="per_kg"?e.jsx(le,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"}),s.pricingmodel==="per_kg"?"Per KG":"Per Item"]})})})]})]},s.id))})]})]})}const me=({searchQuery:t,setSearchQuery:r})=>e.jsxs("div",{className:"relative w-64",children:[e.jsx(ie,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search services...",className:"pl-8",value:t,onChange:i=>r(i.target.value)})]}),ue=({filteredServices:t,searchQuery:r,setSearchQuery:i,fetchServices:c,isLoading:n})=>e.jsxs(U,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{children:"Services"}),e.jsx(me,{searchQuery:r,setSearchQuery:i})]})}),e.jsxs(Z,{children:[e.jsx(de,{services:t,fetchServices:c,isLoading:n}),!n&&t.length===0&&e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No services found. Please try a different search."})]})]}),he=B("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),A=l.forwardRef(({className:t,variant:r,...i},c)=>e.jsx("div",{ref:c,role:"alert",className:C(he({variant:r}),t),...i}));A.displayName="Alert";const ge=l.forwardRef(({className:t,...r},i)=>e.jsx("h5",{ref:i,className:C("mb-1 font-medium leading-none tracking-tight",t),...r}));ge.displayName="AlertTitle";const pe=l.forwardRef(({className:t,...r},i)=>e.jsx("div",{ref:i,className:C("text-sm [&_p]:leading-relaxed",t),...r}));pe.displayName="AlertDescription";const xe=()=>{const{searchQuery:t,setSearchQuery:r,filteredServices:i,isLoading:c,error:n,fetchServices:u}=ce();return e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs(A,{variant:"destructive",className:"mx-auto max-w-4xl mb-4",children:[n," - Showing demo data instead"]}),e.jsx(oe,{searchQuery:t,setSearchQuery:r}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome to the Service Page, where you can create and manage services."}),e.jsx(ue,{fetchServices:u,filteredServices:i,searchQuery:t,setSearchQuery:r,isLoading:c})]})})},De=()=>e.jsx(xe,{});export{De as default};
