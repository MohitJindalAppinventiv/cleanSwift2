import{o as w,u as C,r as d,b as v,A as j,J as f,j as e}from"./index-ByY07t5U.js";import{D as S}from"./DashboardLayout-CorAQK4x.js";import{S as E}from"./ServiceForm-2OWDgV1-.js";import{S as t}from"./skeleton-D-G3Wgw9.js";import"./button-DBciqQcI.js";import"./index-pvnq_pFp.js";import"./input-DcxO3ESS.js";import"./textarea-CMzAX9ph.js";import"./form-D1pnXXWo.js";import"./label-CtRxIZG0.js";import"./select-DSUhFaX8.js";import"./index-DjrpyVfh.js";import"./Combination-DHf6tu9R.js";import"./index-Dxwkp90n.js";import"./index-DDlNMbpf.js";import"./switch-C1bv9KX7.js";import"./upload-Dz_LuVq4.js";const b=()=>{const{id:l}=w(),o=C(),[n,r]=d.useState(null),[g,m]=d.useState(!0),[p,h]=d.useState(!1),[x,u]=d.useState(Date.now());return d.useEffect(()=>{(async()=>{try{m(!0);const a=await v.get(`${j.GET_ALL_SERVICES()}`);if(a.data.success){const s=a.data.data.find(c=>c.id===l);s?r({id:s.id,name:s.name,description:s.description,pricingmodel:s.pricingModel,status:s.isActive?"active":"inactive",imageBase64:s.imageUrl,thumbnail:s.imageUrl}):(f.error("Service not found"),o("/config/services"))}else throw new Error(a.data.message||"Failed to fetch services")}catch(a){console.error("Error fetching service:",a),f.error("Failed to load service data"),o("/config/services")}finally{m(!1)}})()},[l,o]),{service:n,isLoad:g,isLoading:p,fileInputKey:x,handleInputChange:i=>{if(!n)return;const{name:a,value:s}=i.target;r(c=>c?{...c,[a]:s}:null)},handleStatusChange:async i=>{n&&(r(a=>a?{...a,status:i}:null),await v.patch(`${j.TOGGLE_SERVICE_STATUS()}?serviceId=${l}`))},handlePricingModelChange:i=>{n&&r(a=>a?{...a,pricingmodel:i}:null)},handleFileChange:async i=>{if(!i.target.files||i.target.files.length===0)return;const a=i.target.files[0],s=new FileReader;s.onloadend=()=>{const c=s.result;console.log(c),r(y=>y?{...y,imageBase64:c,thumbnail:c}:null)},s.readAsDataURL(a)},handleRemoveThumbnail:()=>{r(i=>({...i,imageBase64:"",thumbnail:""})),u(Date.now())},handleSubmit:async i=>{var a;if(i.preventDefault(),!!n)try{h(!0);const s={name:n.name,description:n.description,pricingModel:n.pricingmodel,imageBase64:(a=n.imageBase64)!=null&&a.startsWith("data:")?n.imageBase64:void 0};await v.put(`${j.UPDATE_SERVICE()}`,s,{params:{serviceId:l},headers:{"Content-Type":"application/json"}}),f.success("Service updated successfully"),o("/config/services")}catch(s){console.error("Error updating service:",s.response.data.message),f.error(s.response.data.message)}finally{h(!1)}},handleCancel:()=>{o("/config/services")},setFileInputKey:u}},Q=()=>{const{service:l,isLoad:o,isLoading:n,fileInputKey:r,handleInputChange:g,handleStatusChange:m,handleFileChange:p,handlePricingModelChange:h,handleSubmit:x,handleCancel:u,handleRemoveThumbnail:N}=b();return o?e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(t,{className:"h-8 w-48"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-24"})," ",e.jsx(t,{className:"h-10 w-full"})," "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-24"})," ",e.jsx(t,{className:"h-32 w-full"})," "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-24"})," ",e.jsx(t,{className:"h-10 w-full"})," "]}),e.jsx(t,{className:"h-20 w-full"})," "]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-24"})," ",e.jsx(t,{className:"h-4 w-32"})," ",e.jsx(t,{className:"h-48 w-full"})," "]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(t,{className:"h-10 w-24"})," ",e.jsx(t,{className:"h-10 w-32"})," "]})]})}):l?e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Service"})}),e.jsx(E,{service:l,isLoading:n,fileInputKey:r,handleInputChange:g,handleStatusChange:m,handlePricingModelChange:h,handleFileChange:p,handleRemoveThumbnail:N,handleSubmit:x,handleCancel:u})]})}):e.jsx(S,{children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("p",{children:"Service not found"})})})};export{Q as default};
