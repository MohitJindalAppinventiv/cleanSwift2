import{r,b as G,j as e}from"./index-ByY07t5U.js";import{D,C as M}from"./DashboardLayout-CorAQK4x.js";import{C as x,a as g,c as h,b as p,e as J}from"./card-DrHBsbjm.js";import{B as K}from"./badge-B45milNp.js";import{T as $,a as B,b as N,c as u,d as L,e as m}from"./table-DrbJVUPK.js";import{S as Q,a as W,b as X,c as Y,d as b}from"./select-DSUhFaX8.js";import{S as o}from"./skeleton-D-G3Wgw9.js";import{I as Z}from"./input-DcxO3ESS.js";import{B as y}from"./button-DBciqQcI.js";import{D as ee}from"./dollar-sign-DU2AVDND.js";import{T as V}from"./trending-up-DeYKARhs.js";import{C as se}from"./calendar-DaBMcz2l.js";import{S as _}from"./search-d2cfHkwq.js";import"./index-DjrpyVfh.js";import"./Combination-DHf6tu9R.js";import"./index-Dxwkp90n.js";import"./index-DDlNMbpf.js";const te=(l,j)=>{const[P,w]=r.useState(l);return r.useEffect(()=>{const C=setTimeout(()=>{w(l)},j);return()=>{clearTimeout(C)}},[l,j]),P},be=()=>{const[l,j]=r.useState([]),[P,w]=r.useState(!0),[C,E]=r.useState(!1),[z,T]=r.useState(null),[t,v]=r.useState({currentPage:1,itemsPerPage:20,totalItems:0,totalPages:0}),[S,R]=r.useState(""),f=te(S,500),k=r.useMemo(()=>{const s=l.reduce((c,i)=>c+(i.amount||0),0),a=l.filter(c=>c.paymentStatus==="paid").length,n=l.filter(c=>c.paymentStatus!=="paid").length,d=new Set(l.map(c=>c.paymentMethod)).size;return{totalRevenue:s,completedPayments:a,pendingPayments:n,uniquePaymentMethods:d}},[l]),I=r.useCallback(async(s=t.currentPage,a=t.itemsPerPage,n=f)=>{try{n!==f&&E(!0);const d=await G.get("/getAllPayments",{params:{page:s,limit:a,search:n.trim()}});j(d.data.data.payments||[]),v(c=>{var i,U;return{...c,currentPage:s,itemsPerPage:a,totalItems:((i=d.data.data.pagination)==null?void 0:i.totalItems)||0,totalPages:((U=d.data.data.pagination)==null?void 0:U.totalPages)||0}}),T(null)}catch(d){console.error("Error fetching payments:",d),T("Failed to fetch payments. Please try again later."),j([])}finally{w(!1),E(!1)}},[f,t.currentPage,t.itemsPerPage]);r.useEffect(()=>{I(1,t.itemsPerPage,f)},[f]),r.useEffect(()=>{P||I(t.currentPage,t.itemsPerPage,f)},[t.currentPage,t.itemsPerPage]);const A=r.useCallback(s=>{v(a=>({...a,currentPage:s}))},[]),F=r.useCallback(s=>{const a=parseInt(s,10);v(n=>({...n,currentPage:1,itemsPerPage:a}))},[]),H=r.useCallback(s=>{R(s.target.value),v(a=>({...a,currentPage:1}))},[]),O=r.useMemo(()=>{const s=[],{currentPage:a,totalPages:n}=t;n>0&&s.push(1);let d=Math.max(2,a-2),c=Math.min(n-1,a+2);d>2&&s.push("...");for(let i=d;i<=c;i++)i!==1&&i!==n&&s.push(i);return c<n-1&&s.push("..."),n>1&&s.push(n),s},[t.currentPage,t.totalPages]),q=r.useCallback(s=>{try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},[]);return P&&l.length===0?e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Payments"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage payment transactions"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((s,a)=>e.jsxs(x,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"h-4 w-[100px]"}),e.jsx(o,{className:"h-4 w-4"})]}),e.jsxs(h,{children:[e.jsx(o,{className:"h-8 w-[150px]"}),e.jsx(o,{className:"h-3 w-[100px] mt-2"})]})]},a))}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(o,{className:"h-6 w-[200px]"}),e.jsx(o,{className:"h-4 w-[300px]"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(o,{className:"h-10 w-[300px]"}),e.jsx(o,{className:"h-10 w-[120px]"})]}),e.jsxs($,{children:[e.jsx(B,{children:e.jsx(N,{children:[...Array(7)].map((s,a)=>e.jsx(u,{children:e.jsx(o,{className:"h-4 w-full"})},a))})}),e.jsx(L,{children:[...Array(5)].map((s,a)=>e.jsx(N,{children:[...Array(7)].map((n,d)=>e.jsx(m,{children:e.jsx(o,{className:"h-4 w-full"})},d))},a))})]})]})})]})]})}):z?e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Payments"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage payment transactions"})]}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:z}),e.jsx(y,{onClick:()=>{T(null),w(!0),I()},children:"Try Again"})]})})})]})}):e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Payments"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage payment transactions"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(x,{className:"hover:shadow-md transition-shadow duration-200",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("div",{className:"h-8 w-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"h-4 w-4 text-primary"})})]}),e.jsxs(h,{className:"pb-2",children:[e.jsxs("div",{className:"text-2xl font-bold tracking-tight mb-1",children:["$",k.totalRevenue.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(V,{className:"h-3 w-3 text-green-600"}),"+20.1% from last month"]})]})]}),e.jsxs(x,{className:"hover:shadow-md transition-shadow duration-200",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Completed Payments"}),e.jsx("div",{className:"h-8 w-8 bg-green-500/10 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-green-600"})})]}),e.jsxs(h,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight mb-1",children:k.completedPayments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful transactions"})]})]}),e.jsxs(x,{className:"hover:shadow-md transition-shadow duration-200",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Pending Payments"}),e.jsx("div",{className:"h-8 w-8 bg-yellow-500/10 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"h-4 w-4 text-yellow-600"})})]}),e.jsxs(h,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight mb-1",children:k.pendingPayments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting confirmation"})]})]}),e.jsxs(x,{className:"hover:shadow-md transition-shadow duration-200",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Payment Methods"}),e.jsx("div",{className:"h-8 w-8 bg-blue-500/10 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs(h,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight mb-1",children:k.uniquePaymentMethods}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active methods"})]})]})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(p,{children:"Recent Payments"}),e.jsx(J,{children:"A list of recent payment transactions"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{type:"text",placeholder:"Search by order ID or customer name...",value:S,onChange:H,className:"pl-10 h-10 border-input bg-background hover:border-ring transition-colors"}),C&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 px-3 py-2 rounded-md border",children:[e.jsx("span",{className:"text-sm font-medium whitespace-nowrap text-muted-foreground",children:"Show:"}),e.jsxs(Q,{value:t.itemsPerPage.toString(),onValueChange:F,children:[e.jsx(W,{className:"w-[70px] h-8 border-0 bg-transparent",children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(b,{value:"5",children:"5"}),e.jsx(b,{value:"10",children:"10"}),e.jsx(b,{value:"20",children:"20"}),e.jsx(b,{value:"50",children:"50"}),e.jsx(b,{value:"100",children:"100"})]})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]})]}),e.jsx("div",{className:"rounded-lg border bg-card overflow-hidden",children:e.jsxs($,{children:[e.jsx(B,{children:e.jsxs(N,{className:"hover:bg-transparent border-b bg-muted/50",children:[e.jsx(u,{className:"font-semibold text-foreground",children:"Payment ID"}),e.jsx(u,{className:"font-semibold text-foreground",children:"Order ID"}),e.jsx(u,{className:"font-semibold text-foreground",children:"Customer"}),e.jsx(u,{className:"text-right font-semibold text-foreground",children:"Amount"}),e.jsx(u,{className:"font-semibold text-foreground",children:"Method"}),e.jsx(u,{className:"font-semibold text-foreground",children:"Status"}),e.jsx(u,{className:"font-semibold text-foreground",children:"Date"})]})}),e.jsx(L,{children:l.length===0?e.jsx(N,{className:"hover:bg-transparent",children:e.jsx(m,{colSpan:7,className:"text-center py-12",children:S?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"h-16 w-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(_,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-foreground font-medium",children:"No payments found"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:['No results match "',S,'". Try adjusting your search.']})]}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>R(""),className:"mt-2",children:"Clear search"})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"h-16 w-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(M,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-foreground font-medium",children:"No payments found"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"There are no payment transactions to display."})]})]})})}):l.map(s=>e.jsxs(N,{className:"hover:bg-muted/30 transition-colors",children:[e.jsx(m,{className:"font-medium font-mono text-sm",children:s.paymentId||"N/A"}),e.jsx(m,{className:"font-medium",children:s.orderId||"N/A"}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary",children:(s.customerName||"U").charAt(0).toUpperCase()})}),e.jsx("span",{children:s.customerName||"Unknown"})]})}),e.jsxs(m,{className:"text-right font-semibold",children:["$",(s.amount||0).toFixed(2)]}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 bg-muted rounded flex items-center justify-center",children:e.jsx(M,{className:"h-3 w-3"})}),e.jsx("span",{className:"capitalize text-sm",children:s.paymentMethod||"N/A"})]})}),e.jsx(m,{children:e.jsxs(K,{variant:"secondary",className:`font-medium ${s.paymentStatus==="paid"?"bg-green-100 text-green-800 hover:bg-green-100 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":s.paymentStatus==="pending"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800":s.paymentStatus==="failed"?"bg-red-100 text-red-800 hover:bg-red-100 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${s.paymentStatus==="paid"?"bg-green-600 dark:bg-green-400":s.paymentStatus==="pending"?"bg-yellow-600 dark:bg-yellow-400":s.paymentStatus==="failed"?"bg-red-600 dark:bg-red-400":"bg-gray-600 dark:bg-gray-400"}`}),s.paymentStatus||"Unknown"]})}),e.jsx(m,{className:"text-muted-foreground",children:s.dateOfPayment?q(s.dateOfPayment):"N/A"})]},s.paymentId||s.orderId))})]})}),t.totalPages>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground order-2 sm:order-1",children:["Showing ",(t.currentPage-1)*t.itemsPerPage+1," to"," ",Math.min(t.currentPage*t.itemsPerPage,t.totalItems)," of"," ",e.jsx("span",{className:"font-medium text-foreground",children:t.totalItems})," results"]}),e.jsxs("div",{className:"flex items-center gap-1 order-1 sm:order-2",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>A(t.currentPage-1),disabled:t.currentPage===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1 mx-1",children:O.map((s,a)=>s==="..."?e.jsx("span",{className:"px-2 py-1 text-muted-foreground",children:"..."},`ellipsis-${a}`):e.jsx(y,{variant:t.currentPage===s?"default":"ghost",size:"sm",onClick:()=>A(s),className:`h-8 w-8 p-0 ${t.currentPage===s?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-muted"}`,children:s},s))}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>A(t.currentPage+1),disabled:t.currentPage===t.totalPages,className:"h-8 px-3",children:"Next"})]})]})]})]})]})})};export{be as default};
