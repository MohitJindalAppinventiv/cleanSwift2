import{j as e,o as R,r as d,u as $,b,d as k}from"./index-ByY07t5U.js";import{D as y,u as M,M as V}from"./DashboardLayout-CorAQK4x.js";import{C as c,c as m,a as h,b as j}from"./card-DrHBsbjm.js";import{T as I,a as D,b as u,c as w}from"./tabs-jpblMaOk.js";import{A as S,a as q,b as z}from"./avatar-ChsuDaDG.js";import{B as A}from"./badge-B45milNp.js";import{T as G,a as J,b as T,c as n,d as K,e as x}from"./table-DrbJVUPK.js";import{O as Q}from"./OrderStatusBadge-Dg7uW5Ai.js";import{A as W}from"./arrow-left-DJgxny9G.js";import{P as g}from"./phone-DhirDCGg.js";import{U as C}from"./user-DOTUANSB.js";import"./button-DBciqQcI.js";import"./index-n1Mj4gwV.js";import"./index-Dxwkp90n.js";import"./index-DjrpyVfh.js";import"./clock-DBwSQnl3.js";import"./user-check-B-SYn2ow.js";import"./circle-check-big-BqL8GB_a.js";import"./truck-D4vkvwy8.js";const X=()=>e.jsx(y,{children:e.jsxs("div",{className:"p-6 space-y-8 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-9 w-32 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-8 w-40 bg-gray-200 rounded-md"})]}),e.jsx("div",{className:"h-7 w-20 bg-gray-200 rounded-full"})]}),e.jsx(c,{className:"shadow-lg",children:e.jsx(m,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(S,{className:"h-24 w-24 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-5 w-40 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-28 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded-md"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-6 md:mt-0 md:ml-auto w-full max-w-md",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"h-6 w-10 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded-md"})]},t))})]})})}),e.jsxs(I,{defaultValue:"details",className:"w-full",children:[e.jsxs(D,{className:"grid w-full grid-cols-2 mb-8 bg-gray-100 p-1 rounded-lg",children:[e.jsx(u,{value:"details",disabled:!0,children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded-md"})}),e.jsx(u,{value:"orders",disabled:!0,children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded-md"})})]}),e.jsxs(c,{className:"shadow-lg mb-6",children:[e.jsx(h,{children:e.jsx(j,{children:e.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded-md"})})}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded-md mt-1"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-36 bg-gray-200 rounded-md"})]})]},t))})})]}),e.jsxs(c,{className:"shadow-lg",children:[e.jsx(h,{children:e.jsx(j,{children:e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded-md"})})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-md",children:[e.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded-md"}),e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded-md"})]},t))})})]})]})]})}),Ne=()=>{const{id:t}=R(),P=M(),[O,L]=d.useState("details"),[s,U]=d.useState(null),[B,p]=d.useState(!0),[f,N]=d.useState(""),E=$(),[l,F]=d.useState([]),[Y,H]=d.useState(null);return d.useEffect(()=>{t&&(async()=>{var i,v;p(!0),N("");try{const r=await b.get("/getUserProfileById",{params:{userId:t}});console.log("profile Response",r),U(r.data.data);const o=await b.get("/getUserOrderAdmin",{params:{userId:t,limit:10,page:1}});console.log("customer order response",o),o.data.success&&(F(o.data.data.orders||[]),H(o.data.data.pagination))}catch(r){k.isAxiosError(r)?N(((v=(i=r.response)==null?void 0:i.data)==null?void 0:v.message)||r.message):N("Failed to load customer details"),console.error(r)}finally{p(!1)}})()},[t]),B?e.jsx(X,{}):f||!s?e.jsx(y,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:f||"Customer not found"})]})}):e.jsx(y,{children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>E("/customers"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-all duration-200",children:[e.jsx(W,{className:"h-4 w-4"}),"Back to Customers"]}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:s.fullName})]}),e.jsx(A,{variant:"outline",className:`px-3 py-1 text-sm font-medium ${s.isActive?"text-green-600 border-green-600":"text-red-600 border-red-600"}`,children:s.isActive?"Active":"Inactive"})]}),e.jsx(c,{className:"shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsx(m,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(S,{className:"h-24 w-24 ring-2 ring-gray-200",children:[s.profilePictureUrl&&e.jsx(q,{src:s.profilePictureUrl,alt:s.fullName,className:"object-cover"}),e.jsx(z,{className:"text-2xl bg-gray-100 text-gray-600",children:s.fullName.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:s.fullName}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:s.phoneNumber})]}),s.alternateNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:s.alternateNumber})]})]})]}),e.jsxs("div",{className:`grid ${P?"grid-cols-2":"grid-cols-3"} gap-4 mt-6 md:mt-0 md:ml-auto`,children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:l.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 transition-colors duration-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["$",l.reduce((a,i)=>a+i.finalTotal,0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Spent"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:l.length>0?new Date(l.slice().sort((a,i)=>new Date(i.createdAt).getTime()-new Date(a.createdAt).getTime())[0].createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Last Order"})]})]})]})})}),e.jsxs(I,{defaultValue:"details",value:O,onValueChange:L,className:"w-full",children:[e.jsxs(D,{className:"grid w-full grid-cols-2 mb-8 bg-gray-100 p-1 rounded-lg",children:[e.jsx(u,{value:"details",className:"py-2 text-sm font-medium rounded-md transition-all duration-200 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Personal Details"}),e.jsx(u,{value:"orders",className:"py-2 text-sm font-medium rounded-md transition-all duration-200 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Order History"})]}),e.jsx(w,{value:"details",children:e.jsxs(c,{className:"shadow-lg",children:[e.jsx(h,{children:e.jsx(j,{className:"text-xl font-semibold text-gray-900",children:"Personal Information"})}),e.jsx(m,{children:e.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.fullName})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"h-5 w-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.phoneNumber})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"h-5 w-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Alternate Number"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.alternateNumber||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Address"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.address||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Customer ID"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.readableUserId})]})]}),e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1 text-sm",children:e.jsx(A,{variant:"outline",className:`${s.isActive?"text-green-600 border-green-600":"text-red-600 border-red-600"}`,children:s.isActive?"Active":"Inactive"})})]})})]})})]})}),e.jsx(w,{value:"orders",children:e.jsxs(c,{className:"shadow-lg",children:[e.jsx(h,{children:e.jsx(j,{className:"text-xl font-semibold text-gray-900",children:"Order History"})}),e.jsx(m,{children:l.length>0?e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(T,{children:[e.jsx(n,{className:"text-gray-700",children:"Order ID"}),e.jsx(n,{className:"text-gray-700",children:"Date"}),e.jsx(n,{className:"text-gray-700",children:"Amount"}),e.jsx(n,{className:"text-gray-700",children:"Total Items"}),e.jsx(n,{className:"text-gray-700",children:"Status"})]})}),e.jsx(K,{children:l.map(a=>e.jsxs(T,{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx(x,{className:"font-medium text-gray-900",children:a.orderId}),e.jsx(x,{className:"text-gray-600",children:new Date(a.createdAt).toLocaleDateString()}),e.jsxs(x,{className:"text-gray-600",children:["$",a.finalTotal.toFixed(2)]}),e.jsx(x,{className:"text-gray-600",children:a.totalItems}),e.jsx(x,{children:e.jsx(Q,{status:a.status})})]},a.id))})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No orders found for this customer."})})})]})})]})]})})};export{Ne as default};
